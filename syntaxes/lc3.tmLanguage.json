{
	"scopeName": "source.asm",
	"patterns": [
		{"include": "#triple"}, 
		{"include": "#double"}, 
		{"include": "#single"},
		{"include": "#simple"},
		{"include": "#synonym"},
		{"include": "#precompile"},
		{"include": "#comment"}
	],
	"repository":{
		"triple": {
			"patterns": [{"include": "#operator"}, {"include": "#register"}, {"include": "#register"}, {"include": "#literal"}]
		},
		"double": {
			"patterns": [{"include": "#operator"}, {"include": "#register"}, {"include": "#literal"}]
		},
		"single": {
			"patterns": [{"include": "#operator"}, {"include": "#literal"}]
		},
		"simple": {
			"patterns": [{"include": "#operator"}]
		},
		"synonym":{
			"match": "GETC|\\s{1}getc|OUT|\\s{1}out|PUTS|\\s{1}puts|IN|\\s{1}in|HALT|halt",
			"name": "macro.trapvector"
		},
		
		"precompile":{
			"begins": "#pseudo_op",
			"ends": "#literal",
			"name": "precompiler.info"
		},
		"pseudo_op":{
			"match":"\\.\\w+",
			"name": "namespace.pseudo_op"
		},

		"register":{
			"match":"R[0-7]|r[0-7]",
			"name":"enum.register"
		},

		"literal":{
			"patterns":[{"include": "#number"}, {"include": "#label"}]
		},
		"number":{
			"patterns":[{"include":"#hexadecimal"}, {"include": "#binary"}, {"include": "#decimal"}]
		},
		"hexadecimal":{
			"match":"[x][0-9a-fA-F]+",
			"name": "number.hexadecimal"
		},
		"binary":{
			"match": "[b][0-1]+",
			"name": "number.binary"
		},
		"decimal":{
			"match": "[#][0-9]+|[#]-[0-9]+",
			"name": "number.decimal"
		},

		"comment":{
			"match": ";[\\s\\S]*",
			"name": "comment"
		},

		"operator":{
			"match": "ADD|add",
			"name": "keyword.operator"
		}
	}
}